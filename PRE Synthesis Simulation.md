---

# 🧩 Week 2 Task – BabySoC Fundamentals & Functional Modelling

## 🎯 Objective

To build a solid understanding of SoC fundamentals and practice functional modelling of the **VSDBabySoC** using **simulation tools** (Icarus Verilog & GTKWave).
The goal is to verify correct functionality of the integrated SoC before synthesis — focusing on **clock, reset, PLL, DAC output**, and internal signal behavior.

---

## 🧠 Overview

**VSDBabySoC** is a simple System-on-Chip (SoC) integrating three major IP blocks:

* 🧮 **RISC-V Processor (rvmyth)** – Acts as the computational core of the system.
* ⚙️ **Phase-Locked Loop (PLL)** – Generates a stable on-chip clock signal.
* 🎚️ **Digital-to-Analog Converter (DAC)** – Converts digital output to an analog waveform.

This simulation verifies **functional correctness at RTL (pre-synthesis)** to ensure proper dataflow and module interconnections before proceeding to synthesis.

---

## 📁 Project Structure

```
VSDBabySoC/
├── src/
│   ├── include/
│   │   ├── sandpiper.vh
│   │   └── sp_default.vh
│   ├── module/
│   │   ├── vsdbabysoc.v      # Top-level SoC module
│   │   ├── rvmyth.v          # RISC-V core
│   │   ├── avsdpll.v         # PLL
│   │   ├── avsddac.v         # DAC
│   │   └── tb_vsdbabysoc.v   # Testbench
└── output/
    ├── pre_synth_sim/
    └── post_synth_sim/
```

---

## ⚙️ Tools Used

* **Icarus Verilog (iverilog)** → To compile and simulate Verilog HDL
* **GTKWave** → To view waveform outputs from `.vcd` files

---

## 🧩 Part 2 – Labs (Hands-on Functional Modelling)

### Step-by-Step Guide for Pre-Synthesis Simulation

#### 🧰 Step 1 – Clone the BabySoC Project Repository

```bash
git clone https://github.com/manoharan-AI/VSDBabySoC.git
cd VSDBabySoC
```

---

#### ⚙️ Step 2 – Compile the BabySoC Verilog Modules

Use **iverilog** to compile all modules and the testbench for RTL-level simulation:

```bash
iverilog -o output/pre_synth_sim/pre_synth_sim.out -DPRE_SYNTH_SIM \
    -I src/include -I src/module \
    src/module/tb_vsdbabysoc.v src/module/vsdbabysoc.v
```

* `-DPRE_SYNTH_SIM` defines the macro for pre-synthesis conditional compilation.
* `-I` includes the header file directories.

---

#### ▶️ Step 3 – Run the Simulation

```bash
cd output/pre_synth_sim
./pre_synth_sim.out
```

This generates a waveform dump file:

```
pre_synth_sim.vcd
```

---

#### 📈 Step 4 – View Waveforms in GTKWave

Open the generated VCD file in GTKWave:

```bash
gtkwave output/pre_synth_sim/pre_synth_sim.vcd
```

---


<img width="1600" height="900" alt="Untitled design (2)" src="https://github.com/user-attachments/assets/e0e31109-0cc1-459d-b868-931ad786584f" />



## 🧩 Step 5 – Analyze Waveform Behavior

The waveform represents the **functional behavior of VSDBabySoC before synthesis**.

### 🖼️ Screenshot Reference: *pre_synth_sim.vcd (RTL Simulation)*

**Observations:**

* `CLK` signal shows a stable oscillation generated by the PLL.
* `RESET` correctly initializes the system and deasserts after a few cycles.
* The `rvmyth` RISC-V core begins instruction execution after reset release.
* `PLL_REF` and `PLL_EN_VCO` show synchronized toggling, confirming PLL locking behavior.
* The **DAC output (`OUT`)** exhibits a smooth sinusoidal-like analog pattern derived from digital inputs, validating correct digital-to-analog conversion.
* Internal signals such as `VREFL`, `VREFH`, and `D[9:0]` transition as per the testbench stimulus, confirming module-level connectivity.

**Interpretation:**
The pre-synthesis simulation successfully verifies the **functional correctness of the SoC**.
All modules — `CPU`, `PLL`, and `DAC` — interact seamlessly, and the output waveform matches expected analog-like variation.
This confirms the RTL design is functionally valid and ready for synthesis.

---

## 📦 Deliverables

* ✅ **Simulation log files** (`pre_synth_sim.out`)
* ✅ **Waveform file** (`pre_synth_sim.vcd`)
* ✅ **GTKWave screenshot** showing `PLL`, `DAC`, and core output behavior
* ✅ **Explanation** (as above) describing correct BabySoC operation at RTL

---

## 🧭 Conclusion

The **pre-synthesis functional simulation** of the VSDBabySoC demonstrates:

* Proper SoC integration at the RTL level.
* Accurate signal propagation and timing behavior.
* Functional verification of the CPU, PLL, and DAC modules before synthesis.

This ensures that the SoC design is **functionally sound and synthesizable** for further gate-level verification.

---
